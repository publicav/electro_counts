(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var RenderCounter = (function () {
    function RenderCounter(dest) {
        this.dest = dest;
    }
    ;
    RenderCounter.prototype.doRun = function (data) {
        var options = '';
        $(data).each(function () {
            options += '<option value="' + $(this).attr('id') + '">' + $(this).attr('name') + '</option>';
        });
        this.html = options;
    };
    RenderCounter.prototype.render = function () {
        var out = this.dest;
        out.html(this.html);
    };
    return RenderCounter;
}());
exports.RenderCounter = RenderCounter;
},{}],2:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var RenderCounter_1 = require("./RenderCounter");
$(function () {
    var RIGTH = $('#right');
    var LOT_EDIT = $('#lot_edit');
    var SUBSTATION_EDIT = $('#substation_edit');
    var ReqestData = {
        render: {},
        data: '',
        url: '',
        type: '',
        init: function (render, url, param, type) {
            if (param === void 0) { param = {}; }
            if (type === void 0) { type = 'post'; }
            this.data = param;
            this.render = render;
            this.url = url;
            this.type = type;
        },
        reqest: function () {
            var _this = this;
            var me = this;
            $.ajax({ dataType: 'json', type: me.type, url: me.url, data: me.data })
                .done(function (result) {
                console.log(result);
                _this.render.doRun(result.data);
                _this.render.render();
            })
                .fail(function (result) { return alert(result.responseJSON.error); });
        },
    };
    var renderCounter = new RenderCounter_1.RenderCounter($('#counter_edit'));
    var loadFormValue = {
        dest: {},
        init: function (dest) {
            this.dest = dest;
        },
        doRun: function (data) {
            this.dest.objLot.find('[value="' + data.lot_id + '"]').prop("selected", true);
            this.dest.objDate.val(data.date1);
            this.dest.objTime.val(data.time1);
            this.dest.objValEdit.val(data.value);
            this.dest.objId.val(data.id);
        },
        render: function () {
        }
    };
    var ObjSelected = (function () {
        function ObjSelected(objLot, objSubstation, objCounter, url_substation, url_counter) {
            this.objLot = objLot;
            this.objSubstation = objSubstation;
            this.objCounter = objCounter;
            this.url_substation = url_substation;
            this.url_counter = url_counter;
        }
        return ObjSelected;
    }());
    var objSelected = new ObjSelected(LOT_EDIT, SUBSTATION_EDIT, $('#counter_edit'), 'ajax/subst/', 'ajax/counter/');
    var objEditForm = {
        objDate: $('#date_airing_begin_edit'),
        objTime: $('#time_airing_begin_edit'),
        objValEdit: $('#counter_val_edit'),
        objId: $('#edit_id1'),
        param: {},
        __proto__: objSelected
    };
    var edit_form_actions = function (form) {
        var formActions = $(form);
        var m_method = formActions.attr('method');
        var m_action = formActions.attr('action');
        var m_data = formActions.serialize();
        $.ajax({ dataType: 'json', type: m_method, url: m_action, data: m_data })
            .done(function (result) {
            if (result.success) {
            }
            else
                alert(result.error);
        })
            .fail(function (result) { return alert(result.responseJSON.error); });
    };
    $("#date_airing_begin_edit").datepicker({ changeYear: true, dateFormat: 'dd-mm-yy' });
    $('#time_airing_begin_edit').mask('H9:M9');
    LOT_EDIT.change(function () {
        var lot = $(this).val();
    });
    SUBSTATION_EDIT.change(function () {
        var substation = $(this).val();
        ReqestData.init(renderCounter, 'ajax/counter/', { data: substation }, 'get');
        ReqestData.reqest();
    });
    var edit_form = $("#edit_value_counts_form").dialog({
        title: "Редактирование значения счётчика",
        autoOpen: false,
        resizable: false,
        height: 350,
        width: 620,
        modal: true,
        close: function () {
            var formRes = $(this)[0];
            formRes.reset();
        },
        buttons: [
            {
                text: 'Ok',
                click: function () {
                    edit_form_actions(this);
                    $(this).dialog("close");
                }
            },
            {
                text: 'Cancel',
                click: function () {
                    $(this).dialog("close");
                }
            }
        ]
    });
    $(document).on("submit", '#edit_value_counts_form', function (event) {
        event.preventDefault();
        edit_form_actions(this);
        edit_form.dialog("close");
    });
    RIGTH.on('click', '.counter_str_even, .counter_str_odd', function (event) {
        var edit_id = $(this).attr('id');
        var param = { 'id': edit_id.slice(3) };
        loadFormValue.init(objEditForm);
        ReqestData.init(loadFormValue, 'ajax/loadform_value/', param);
        ReqestData.reqest();
        edit_form.dialog("open");
        event.preventDefault();
    });
});
},{"./RenderCounter":1}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJ0cy9SZW5kZXJDb3VudGVyLnRzIiwidHMvZWRpdF9jb3VudHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0dBO0lBSUksdUJBQWEsSUFBWTtRQUNyQixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztJQUNyQixDQUFDO0lBQUEsQ0FBQztJQUVLLDZCQUFLLEdBQVosVUFBYyxJQUFJO1FBQ2QsSUFBSSxPQUFPLEdBQUcsRUFBRSxDQUFDO1FBQ2pCLENBQUMsQ0FBRSxJQUFJLENBQUUsQ0FBQyxJQUFJLENBQUU7WUFDWixPQUFPLElBQUksaUJBQWlCLEdBQUcsQ0FBQyxDQUFFLElBQUksQ0FBRSxDQUFDLElBQUksQ0FBRSxJQUFJLENBQUUsR0FBRyxJQUFJLEdBQUcsQ0FBQyxDQUFFLElBQUksQ0FBRSxDQUFDLElBQUksQ0FBRSxNQUFNLENBQUUsR0FBRyxXQUFXLENBQUM7UUFDMUcsQ0FBQyxDQUFFLENBQUM7UUFDSixJQUFJLENBQUMsSUFBSSxHQUFHLE9BQU8sQ0FBQztJQUN4QixDQUFDO0lBRU0sOEJBQU0sR0FBYjtRQUNJLElBQUksR0FBRyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUM7UUFDcEIsR0FBRyxDQUFDLElBQUksQ0FBRSxJQUFJLENBQUMsSUFBSSxDQUFFLENBQUM7SUFDMUIsQ0FBQztJQUNMLG9CQUFDO0FBQUQsQ0FwQkEsQUFvQkMsSUFBQTtBQUNRLHNDQUFhOzs7O0FDeEJ0QixpREFBaUQ7QUFDakQsQ0FBQyxDQUFFO0lBQ0MsSUFBTSxLQUFLLEdBQUcsQ0FBQyxDQUFFLFFBQVEsQ0FBRSxDQUFDO0lBQzVCLElBQU0sUUFBUSxHQUFHLENBQUMsQ0FBRSxXQUFXLENBQUUsQ0FBQztJQUNsQyxJQUFNLGVBQWUsR0FBRyxDQUFDLENBQUUsa0JBQWtCLENBQUUsQ0FBQztJQUNoRCxJQUFNLFVBQVUsR0FBRztRQUNmLE1BQU0sRUFBRSxFQUFF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dXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgdmFsaWsgb24gMjMuMDMuMjAxNy5cclxuICovXHJcbmNsYXNzIFJlbmRlckNvdW50ZXIge1xyXG4gICAgcHJvdGVjdGVkIGRlc3Q6IGFueTtcclxuICAgIHByb3RlY3RlZCBodG1sOiBzdHJpbmc7XHJcblxyXG4gICAgY29uc3RydWN0b3IoIGRlc3Q6IE9iamVjdCApIHtcclxuICAgICAgICB0aGlzLmRlc3QgPSBkZXN0O1xyXG4gICAgfTtcclxuXHJcbiAgICBwdWJsaWMgZG9SdW4oIGRhdGEgKSB7XHJcbiAgICAgICAgbGV0IG9wdGlvbnMgPSAnJztcclxuICAgICAgICAkKCBkYXRhICkuZWFjaCggZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBvcHRpb25zICs9ICc8b3B0aW9uIHZhbHVlPVwiJyArICQoIHRoaXMgKS5hdHRyKCAnaWQnICkgKyAnXCI+JyArICQoIHRoaXMgKS5hdHRyKCAnbmFtZScgKSArICc8L29wdGlvbj4nO1xyXG4gICAgICAgIH0gKTtcclxuICAgICAgICB0aGlzLmh0bWwgPSBvcHRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IG91dCA9IHRoaXMuZGVzdDtcclxuICAgICAgICBvdXQuaHRtbCggdGhpcy5odG1sICk7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0IHsgUmVuZGVyQ291bnRlciB9OyIsImltcG9ydCB7IFJlbmRlckNvdW50ZXIgfSAgZnJvbSBcIi4vUmVuZGVyQ291bnRlclwiO1xyXG4kKCAoKSA9PiB7XHJcbiAgICBjb25zdCBSSUdUSCA9ICQoICcjcmlnaHQnICk7XHJcbiAgICBjb25zdCBMT1RfRURJVCA9ICQoICcjbG90X2VkaXQnICk7XHJcbiAgICBjb25zdCBTVUJTVEFUSU9OX0VESVQgPSAkKCAnI3N1YnN0YXRpb25fZWRpdCcgKTtcclxuICAgIGNvbnN0IFJlcWVzdERhdGEgPSB7XHJcbiAgICAgICAgcmVuZGVyOiB7fSxcclxuICAgICAgICBkYXRhOiAnJyxcclxuICAgICAgICB1cmw6ICcnLFxyXG4gICAgICAgIHR5cGU6ICcnLFxyXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uICggcmVuZGVyLCB1cmwsIHBhcmFtID0ge30sIHR5cGUgPSAncG9zdCcgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YSA9IHBhcmFtO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlciA9IHJlbmRlcjtcclxuICAgICAgICAgICAgdGhpcy51cmwgPSB1cmw7XHJcbiAgICAgICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICByZXFlc3Q6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgbGV0IG1lID0gdGhpcztcclxuICAgICAgICAgICAgJC5hamF4KCB7IGRhdGFUeXBlOiAnanNvbicsIHR5cGU6IG1lLnR5cGUsIHVybDogbWUudXJsLCBkYXRhOiBtZS5kYXRhIH0gKVxyXG4gICAgICAgICAgICAgICAgLmRvbmUoICggcmVzdWx0ICkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCByZXN1bHQgKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5kb1J1biggcmVzdWx0LmRhdGEgKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5yZW5kZXIoKTtcclxuICAgICAgICAgICAgICAgIH0gKVxyXG4gICAgICAgICAgICAgICAgLmZhaWwoICggcmVzdWx0ICkgPT4gYWxlcnQoIHJlc3VsdC5yZXNwb25zZUpTT04uZXJyb3IgKSApO1xyXG5cclxuICAgICAgICB9LFxyXG4gICAgfTtcclxuICAgIGNvbnN0IHJlbmRlckNvdW50ZXI6IFJlbmRlckNvdW50ZXIgPSBuZXcgUmVuZGVyQ291bnRlciggJCggJyNjb3VudGVyX2VkaXQnICkgKTtcclxuICAgIGNvbnN0IGxvYWRGb3JtVmFsdWUgPSB7XHJcbiAgICAgICAgZGVzdDoge30sXHJcbiAgICAgICAgaW5pdDogZnVuY3Rpb24gKCBkZXN0ICkge1xyXG4gICAgICAgICAgICB0aGlzLmRlc3QgPSBkZXN0O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZG9SdW46IGZ1bmN0aW9uICggZGF0YSApIHtcclxuICAgICAgICAgICAgdGhpcy5kZXN0Lm9iakxvdC5maW5kKCAnW3ZhbHVlPVwiJyArIGRhdGEubG90X2lkICsgJ1wiXScgKS5wcm9wKCBcInNlbGVjdGVkXCIsIHRydWUgKTtcclxuXHJcbi8vICAgICAgICAgICAgZ2V0X3N1YnN0YXRpb24oIG9iaiwgZGF0YS5sb3RfaWQsIDIsIGRhdGEuc3ViX2lkLCBkYXRhLmNvdW50ZXJfaWQgKTtcclxuICAgICAgICAgICAgdGhpcy5kZXN0Lm9iakRhdGUudmFsKCBkYXRhLmRhdGUxICk7XHJcbiAgICAgICAgICAgIHRoaXMuZGVzdC5vYmpUaW1lLnZhbCggZGF0YS50aW1lMSApO1xyXG4gICAgICAgICAgICB0aGlzLmRlc3Qub2JqVmFsRWRpdC52YWwoIGRhdGEudmFsdWUgKTtcclxuICAgICAgICAgICAgdGhpcy5kZXN0Lm9iaklkLnZhbCggZGF0YS5pZCApO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBpbnRlcmZhY2Ugb2JqRWRpdEZvcm0ge1xyXG4gICAgLy8gICAgIG9iakRhdGU/OiBvYmplY3Q7XHJcbiAgICAvLyAgICAgb2JqVGltZT86IG9iamVjdDtcclxuICAgIC8vICAgICBvYmpWYWxFZGl0Pzogb2JqZWN0O1xyXG4gICAgLy8gICAgIG9iaklkPzogb2JqZWN0O1xyXG4gICAgLy8gICAgIHBhcmFtPzogb2JqZWN0O1xyXG4gICAgLy8gfVxyXG4gICAgY2xhc3MgT2JqU2VsZWN0ZWQge1xyXG4gICAgICAgIG9iakxvdD86IG9iamVjdDtcclxuICAgICAgICBvYmpTdWJzdGF0aW9uPzogb2JqZWN0O1xyXG4gICAgICAgIG9iakNvdW50ZXI/OiBvYmplY3Q7XHJcbiAgICAgICAgdXJsX3N1YnN0YXRpb24/OiBzdHJpbmc7XHJcbiAgICAgICAgdXJsX2NvdW50ZXI/OiBzdHJpbmc7XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKCBvYmpMb3Q6IG9iamVjdCwgb2JqU3Vic3RhdGlvbjogb2JqZWN0LCBvYmpDb3VudGVyOiBvYmplY3QsXHJcbiAgICAgICAgICAgICAgICAgICAgIHVybF9zdWJzdGF0aW9uOiBzdHJpbmcsIHVybF9jb3VudGVyPzogc3RyaW5nICkge1xyXG4gICAgICAgICAgICB0aGlzLm9iakxvdCA9IG9iakxvdDtcclxuICAgICAgICAgICAgdGhpcy5vYmpTdWJzdGF0aW9uID0gb2JqU3Vic3RhdGlvbjtcclxuICAgICAgICAgICAgdGhpcy5vYmpDb3VudGVyID0gb2JqQ291bnRlcjtcclxuICAgICAgICAgICAgdGhpcy51cmxfc3Vic3RhdGlvbiA9IHVybF9zdWJzdGF0aW9uO1xyXG4gICAgICAgICAgICB0aGlzLnVybF9jb3VudGVyID0gdXJsX2NvdW50ZXI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3Qgb2JqU2VsZWN0ZWQ6IE9ialNlbGVjdGVkID1cclxuICAgICAgICBuZXcgT2JqU2VsZWN0ZWQoXHJcbiAgICAgICAgICAgIExPVF9FRElULFxyXG4gICAgICAgICAgICBTVUJTVEFUSU9OX0VESVQsXHJcbiAgICAgICAgICAgICQoICcjY291bnRlcl9lZGl0JyApLFxyXG4gICAgICAgICAgICAnYWpheC9zdWJzdC8nLFxyXG4gICAgICAgICAgICAnYWpheC9jb3VudGVyLydcclxuICAgICAgICApO1xyXG5cclxuICAgIGNvbnN0IG9iakVkaXRGb3JtID0ge1xyXG4gICAgICAgIG9iakRhdGU6ICQoICcjZGF0ZV9haXJpbmdfYmVnaW5fZWRpdCcgKSxcclxuICAgICAgICBvYmpUaW1lOiAkKCAnI3RpbWVfYWlyaW5nX2JlZ2luX2VkaXQnICksXHJcbiAgICAgICAgb2JqVmFsRWRpdDogJCggJyNjb3VudGVyX3ZhbF9lZGl0JyApLFxyXG4gICAgICAgIG9iaklkOiAkKCAnI2VkaXRfaWQxJyApLFxyXG4gICAgICAgIHBhcmFtOiB7fSxcclxuICAgICAgICBfX3Byb3RvX186IG9ialNlbGVjdGVkXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGVkaXRfZm9ybV9hY3Rpb25zID0gKCBmb3JtICkgPT4ge1xyXG4gICAgICAgIGxldCBmb3JtQWN0aW9ucyA9ICQoIGZvcm0gKTtcclxuXHJcbiAgICAgICAgbGV0IG1fbWV0aG9kID0gZm9ybUFjdGlvbnMuYXR0ciggJ21ldGhvZCcgKTtcclxuICAgICAgICBsZXQgbV9hY3Rpb24gPSBmb3JtQWN0aW9ucy5hdHRyKCAnYWN0aW9uJyApO1xyXG4gICAgICAgIGxldCBtX2RhdGEgPSBmb3JtQWN0aW9ucy5zZXJpYWxpemUoKTtcclxuXHJcbiAgICAgICAgJC5hamF4KCB7IGRhdGFUeXBlOiAnanNvbicsIHR5cGU6IG1fbWV0aG9kLCB1cmw6IG1fYWN0aW9uLCBkYXRhOiBtX2RhdGEgfSApXHJcbiAgICAgICAgICAgIC5kb25lKCAoIHJlc3VsdCApID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICggcmVzdWx0LnN1Y2Nlc3MgKSB7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgIGFsZXJ0KCByZXN1bHQuZXJyb3IgKTtcclxuICAgICAgICAgICAgfSApXHJcbiAgICAgICAgICAgIC5mYWlsKCAoIHJlc3VsdCApID0+IGFsZXJ0KCByZXN1bHQucmVzcG9uc2VKU09OLmVycm9yICkgKTtcclxuICAgIH07XHJcblxyXG4gICAgJCggXCIjZGF0ZV9haXJpbmdfYmVnaW5fZWRpdFwiICkuZGF0ZXBpY2tlciggeyBjaGFuZ2VZZWFyOiB0cnVlLCBkYXRlRm9ybWF0OiAnZGQtbW0teXknIH0gKTtcclxuXHJcbiAgICAvLyAkLm1hc2suZGVmaW5pdGlvbnNbICdIJyBdID0gJ1swMTJdJztcclxuICAgIC8vICQubWFzay5kZWZpbml0aW9uc1sgJ00nIF0gPSAnWzAxMjM0NV0nO1xyXG4gICAgLy8gJC5tYXNrLmRlZmluaXRpb25zWyAnRicgXSA9ICdbMC05Ll0rJztcclxuICAgICQoICcjdGltZV9haXJpbmdfYmVnaW5fZWRpdCcgKS5tYXNrKCAnSDk6TTknICk7XHJcbiAgICBMT1RfRURJVC5jaGFuZ2UoIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBsZXQgbG90ID0gJCggdGhpcyApLnZhbCgpO1xyXG4gICAgICAgIC8vIGdldF9zdWJzdGF0aW9uKCBvYmpTZWxlY3RlZCwgbG90ICk7XHJcbiAgICB9ICk7XHJcbiAgICBTVUJTVEFUSU9OX0VESVQuY2hhbmdlKCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbGV0IHN1YnN0YXRpb24gPSAkKCB0aGlzICkudmFsKCk7XHJcbiAgICAgICAgUmVxZXN0RGF0YS5pbml0KCByZW5kZXJDb3VudGVyLCAnYWpheC9jb3VudGVyLycsIHsgZGF0YTogc3Vic3RhdGlvbiB9LCAnZ2V0JyApO1xyXG4gICAgICAgIFJlcWVzdERhdGEucmVxZXN0KCk7XHJcblxyXG4gICAgICAgIC8vIGdldF9jb3VudGVyKCBvYmpTZWxlY3RlZCwgc3Vic3RhdGlvbiApO1xyXG4gICAgfSApO1xyXG4gICAgY29uc3QgZWRpdF9mb3JtID0gJCggXCIjZWRpdF92YWx1ZV9jb3VudHNfZm9ybVwiICkuZGlhbG9nKCB7XHJcbiAgICAgICAgdGl0bGU6IFwi0KDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjQtSDQt9C90LDRh9C10L3QuNGPINGB0YfRkdGC0YfQuNC60LBcIixcclxuICAgICAgICBhdXRvT3BlbjogZmFsc2UsXHJcbiAgICAgICAgcmVzaXphYmxlOiBmYWxzZSxcclxuICAgICAgICBoZWlnaHQ6IDM1MCxcclxuICAgICAgICB3aWR0aDogNjIwLFxyXG4gICAgICAgIG1vZGFsOiB0cnVlLFxyXG4gICAgICAgIGNsb3NlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGxldCBmb3JtUmVzOiBhbnkgPSAkKCB0aGlzIClbIDAgXTtcclxuICAgICAgICAgICAgZm9ybVJlcy5yZXNldCgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYnV0dG9uczogW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OiAnT2snLFxyXG4gICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBlZGl0X2Zvcm1fYWN0aW9ucyggdGhpcyApO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGpzb25fZ2V0X3RhYmxlKCBSSUdUSCwgY21kX2FyciApO1xyXG4gICAgICAgICAgICAgICAgICAgICQoIHRoaXMgKS5kaWFsb2coIFwiY2xvc2VcIiApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OiAnQ2FuY2VsJyxcclxuICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCggdGhpcyApLmRpYWxvZyggXCJjbG9zZVwiICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBdXHJcbiAgICB9ICk7XHJcblxyXG4gICAgJCggZG9jdW1lbnQgKS5vbiggXCJzdWJtaXRcIiwgJyNlZGl0X3ZhbHVlX2NvdW50c19mb3JtJywgZnVuY3Rpb24gKCBldmVudCApIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGVkaXRfZm9ybV9hY3Rpb25zKCB0aGlzICk7XHJcbiAgICAgICAgLy8ganNvbl9nZXRfdGFibGUoIFJJR1RILCBjbWRfYXJyICk7XHJcbiAgICAgICAgZWRpdF9mb3JtLmRpYWxvZyggXCJjbG9zZVwiICk7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgUklHVEgub24oICdjbGljaycsICcuY291bnRlcl9zdHJfZXZlbiwgLmNvdW50ZXJfc3RyX29kZCcsIGZ1bmN0aW9uICggZXZlbnQgKSB7XHJcbiAgICAgICAgbGV0IGVkaXRfaWQgPSAkKCB0aGlzICkuYXR0ciggJ2lkJyApO1xyXG4gICAgICAgIGxldCBwYXJhbSA9IHsgJ2lkJzogZWRpdF9pZC5zbGljZSggMyApIH07XHJcblxyXG4gICAgICAgIGxvYWRGb3JtVmFsdWUuaW5pdCggb2JqRWRpdEZvcm0gKTtcclxuICAgICAgICBSZXFlc3REYXRhLmluaXQoIGxvYWRGb3JtVmFsdWUsICdhamF4L2xvYWRmb3JtX3ZhbHVlLycsIHBhcmFtICk7XHJcbiAgICAgICAgUmVxZXN0RGF0YS5yZXFlc3QoKTtcclxuXHJcbiAgICAgICAgZWRpdF9mb3JtLmRpYWxvZyggXCJvcGVuXCIgKTtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSApO1xyXG5cclxufSApOyJdfQ==
