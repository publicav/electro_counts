$(function(){var d=$("#right");var b={render:{},data:"",url:"",type:"",init:function(g,e,h,f){if(h===void 0){h=""}if(f===void 0){f="post"}this.data=h;this.render=g;this.url=e;this.type=f},reqest:function(){var f=this;var e=this;$.ajax({dataType:"json",type:e.type,url:e.url,data:e.data}).done(function(g){console.log(g);f.render.doRun(g.data);f.render.render()}).fail(function(g){return alert(g.responseJSON.error)})}};var c={dest:{},html:"",init:function(e){this.dest=e},doRun:function(h){var f='<div id="group-counter" class="widget">';f+='<label for="group">Выбор группы счётчиков</label>';f+='<select id="group" name="group" class="ui-group-counter">';for(var g=0;g<h.length;g++){var e=h[g];f+='<option value="'+e.id+'" class="group-counter-list">'+e.name+"</option>"}f+="</select>";f+="</div>";this.html=f},render:function(){this.dest.find("#group-counter").remove();this.dest.find("#btn-action-group").remove();this.dest.append(this.html);this.dest.append('<div id="btn-action-group" class="widget">\n                    <button id="del-group"><i class="fa fa-trash-o"></i>\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0433\u0440\u0443\u043F\u043F\u0443</button>\n                </div>');$("#btn-action-group").click(function(g){console.log("Delete Group");var f=$("#group").val();console.log(f);a.init({del_group:f});a.doDeleteGroup();g.preventDefault()});$("#group").select2()}};var a={params:{},init:function(e){this.params=e},doDeleteGroup:function(){$.ajax({dataType:"json",type:"post",url:"ajax/actionbtn_delete_group/",data:this.params}).done(function(){c.init(d);b.init(c,"ajax/getgroup_all/","","get");b.reqest()}).fail(function(e){return alert(e.responseJSON.error)})}};c.init(d);b.init(c,"ajax/getgroup_all/","","get");b.reqest();$(".widget button").button()});